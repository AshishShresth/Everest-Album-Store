@model IEnumerable<EverestAlbumStore.Models.Loan>

@{
    ViewBag.Title = "FilterMemberByIdOrLastname";
}


<h2>Task 3</h2>
<p>
    Allow the user to enter or select a member by MemberNumber or MemberLastName
    and view a list of all the DVDs (by title and copynumber) that they have been loaned
    in the last 31 days (i.e. where there is a Loan row with DateOut >= Current_date-31,
    whether the DVD has been returned or not).
</p>

<form method="get" action="/Report/FilterMemberByIdOrLastname">
    @Html.DropDownList("Name", new SelectList(ViewBag.Name, "Name", "Name"), null, null)
    <button type="submit">Search</button>
</form>
@if (Model != null)
{
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Albums.Tittle)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Members.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IssuedDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ReturnedDate)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Albums.Tittle)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Members.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.IssuedDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ReturnedDate)
                </td>
            </tr>
        }

    </table>
}
